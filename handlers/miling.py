from aiogram import Router
import asyncio
import aioschedule as schedule
from aiogram import Bot,  F
from time import sleep
from DataBase.db import increment_days, check_miling_time_days

from aiogram.utils.markdown import link



from dotenv import load_dotenv
import os
load_dotenv()
bot = Bot(token=os.getenv('BOT_TOKEN'))


link_text = link('–º–æ–∂–Ω–æ —Ç—É—Ç', 'https://pawetta.com/vihrov')
chanel_link = link('–∫–∞–Ω–∞–ª–µ', 'https://t.me/trafficisobar')

text_3day = f'–ü—Ä–∏–≤–µ—Ç! 3 –¥–Ω—è –Ω–∞–∑–∞–¥ —è –æ—Ç–ø—Ä–∞–≤–∏–ª —Ç–µ–±–µ –∫—É—Ä—Å. –ù–∞–¥–µ—é—Å—å, —É–¥–∞–ª–æ—Å—å –∏–∑—É—á–∏—Ç—å, –ø—Ä–∏–º–µ–Ω–∏—Ç—å, –∏ –ø–æ–ª—É—á–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç üòä\n\n*–ü—Ä–∏–≥–ª–∞—à–∞—é —Ç–µ–±—è* –∏–∑—É—á–∏—Ç—å –º–æ–π –∫–∞–Ω–∞–ª (–µ—Å–ª–∏ –µ—â–µ –Ω–µ—Ç), —Ç–∞–º –º–Ω–æ–≥–æ –ø–æ–ª–µ–∑–Ω–æ–≥–æ, —è —Å–æ–±–∏—Ä–∞—é —Å–∞–º—ã–µ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã–µ –ø–æ—Å—Ç—ã –≤ –º–∏–Ω–∏-–∫—É—Ä—Å—ã –∏ –¥–µ–ª—é—Å—å –∏–º–∏ –≤ —ç—Ç–æ–º –±–æ—Ç–µ.\n\n–ü–æ—á–∏—Ç–∞—Ç—å –æ–±–æ –º–Ω–µ ‚Äî {link_text}\n–ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å ‚Äî @aeads7\n\n*–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —á–∏—Ç–∞–µ—à—å –∏ –¥–µ–ª–∏—à—å—Å—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑—å—é*. –≠—Ç–æ –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å –Ω–æ–≤—ã–µ –ø—Ä–æ–¥—É–∫—Ç—ã ‚ù§Ô∏è'

text_30days = f'–ü—Ä–∏–≤–µ—Ç, —É –Ω–∞—Å –ø–µ—Ä–≤–∞—è –¥–∞—Ç–∞!\n\n–°–µ–≥–æ–¥–Ω—è –º–µ—Å—è—Ü, –∫–∞–∫ –º—ã –ø–æ–∑–Ω–∞–∫–æ–º–∏–ª–∏—Å—å ‚ò∫Ô∏è\n\n–ó–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü ‚Äî –±—ã–ª–æ –≤—ã–ø—É—â–µ–Ω–æ –∫—É—á–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ –≤ {chanel_link}, –ø–µ—Ä–µ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –∫—É—á–∏ –≥–∏–ø–æ—Ç–µ–∑, —Å–¥–µ–ª–∞–Ω—ã –≤—ã–≤–æ–¥—ã. ~~–ß–∞—â–µ ‚Äî –Ω–µ—É—Ç–µ—à–∏—Ç–µ–ª—å–Ω—ã–µ~~. –ò –ø—Ä–∏—à–ª–æ –≤—Ä–µ–º—è –≥–æ—Ç–æ–≤–∏—Ç—å –Ω–æ–≤—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç.\n\n*–•–æ—á–µ—à—å –ø–æ—á–∏—Ç–∞—Ç—å –æ —á–µ–º-—Ç–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º? –•–æ—á–µ—à—å –º–∏–Ω–∏-–∫—É—Ä—Å –ø–æ –∫–∞–∫–æ–π-—Ç–æ –≤–∞–∂–Ω–æ–π —Ç–µ–º–µ?* \n\n–û—Ç–≤–µ—á–∞–π –ø—Ä—è–º–æ –≤ —ç—Ç–æ—Ç —á–∞—Ç–∏–∫, –æ–Ω–æ —Å—Ä–∞–∑—É –ø–∞–¥–∞–µ—Ç –º–Ω–µ –≤ –ª–∏—á–∫—É üöÄ–í–µ—á–Ω–æ–µ —Å–ø–∞—Å–∏–±–æ –∏ –º–∏–ª–ª–∏–æ–Ω likes ‚Äî —Ç–µ–±–µ'


async def mailing_messages():

    increment_days()
        
    for user_id in check_miling_time_days(3):
        bot.send_message(chat_id=user_id, text=text_3day, parse_mode='Markdown')



    for user_id in check_miling_time_days(30):
        bot.send_message(chat_id=user_id, text=text_30days, parse_mode='Markdown')


    





